/* ============================================
   Islamic Web - Unified CSS (Light/Dark + RTL)
   - Plain CSS (no nesting)
   - Semantic theme tokens
   - Dropdown uses .open (not :hover)
   - Mini player uses [hidden]
   ============================================ */

/* =========================
   0) THEME TOKENS
   ========================= */
:root {
  /* Brand palette */
  --color-primary: #1f2933;
  --color-primary-dark: #0f172a;
  --color-secondary: #3b82f6;
  --color-success: #10b981;
  --color-warning: #f59e0b;
  --color-danger: #ef4444;
  --color-danger-alt: #f43f5e;
  --color-neutral: #6b7280;

  /* Grays */
  --g-50:  #f9fafb;
  --g-100: #f3f4f6;
  --g-200: #e5e7eb;
  --g-300: #d1d5db;
  --g-400: #9ca3af;
  --g-700: #374151;
  --g-900: #111827;

  /* Semantic UI (LIGHT) */
  --bg: var(--g-50);
  --surface: #ffffff;
  --surface-2: var(--g-100);
  --text: var(--g-900);
  --text-muted: var(--g-700);
  --border: var(--g-200);

  /* Typography */
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;
  --fs-xs: 12px;
  --fs-sm: 14px;
  --fs-base: 16px;
  --fs-lg: 18px;
  --fs-xl: 20px;
  --fs-2xl: 24px;

  /* Spacing */
  --s-xs: 4px;
  --s-sm: 8px;
  --s-md: 12px;
  --s-lg: 16px;
  --s-xl: 20px;
  --s-2xl: 24px;
  --s-3xl: 32px;

  /* Radius */
  --r-sm: 6px;
  --r-md: 8px;
  --r-lg: 12px;
  --r-xl: 16px;
  --r-pill: 9999px;

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.10);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.10);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.15);

  /* Transitions */
  --t-fast: 150ms ease;
  --t-base: 250ms ease;
  --t-slow: 350ms ease;

  /* Header gradient */
  --header-grad: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
}

[data-theme="dark"] {
  /* Semantic UI (DARK) */
  --bg: #0b1220;
  --surface: #0f172a;
  --surface-2: #111c33;
  --text: #f9fafb;
  --text-muted: #cbd5e1;
  --border: rgba(255, 255, 255, 0.10);

  /* Palette tweaks */
  --color-secondary: #60a5fa;
  --color-success: #34d399;
  --color-warning: #fbbf24;
  --color-danger: #f87171;
  --color-danger-alt: #fb7185;
  --color-neutral: #9ca3af;

  --header-grad: linear-gradient(135deg, #0e172a 0%, #070d1a 100%);
}

/* =========================
   1) RESET & BASE
   ========================= */
* { margin: 0; padding: 0; box-sizing: border-box; }
html { font-size: 16px; scroll-behavior: smooth; }
body {
  font-family: var(--font-family);
  font-size: var(--fs-base);
  line-height: 1.5;
  color: var(--text);
  background: var(--bg);
  transition: background var(--t-base), color var(--t-base);
}
img { max-width: 100%; display: block; }
a { color: var(--color-secondary); text-decoration: none; transition: color var(--t-fast); }
a:hover { color: var(--color-primary); text-decoration: underline; }
button, input, select, textarea { font: inherit; }
.no-scroll { overflow: hidden; }

/* =========================
   2) TYPOGRAPHY
   ========================= */
h1, h2, h3, h4, h5, h6 {
  font-weight: 800;
  line-height: 1.2;
  margin-bottom: var(--s-lg);
  color: var(--text);
}
h1 { font-size: var(--fs-2xl); }
h2 { font-size: var(--fs-xl); }
h3 { font-size: var(--fs-lg); margin-top: var(--s-xl); }
h4 { font-size: var(--fs-base); }
p { margin-bottom: var(--s-md); }

.detail-label {
  font-weight: 700;
  color: var(--text);
  margin-right: var(--s-xs);
}

/* =========================
   3) LAYOUT
   ========================= */
.container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--s-lg);
}
main { padding: var(--s-xl); min-height: calc(100vh - 200px); }
.section { margin-bottom: var(--s-3xl); }
.section-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--s-md);
  flex-wrap: wrap;
  margin-bottom: var(--s-lg);
}

.soft-hr,
.hr {
  border: none;
  height: 1px;
  background: var(--border);
  margin: var(--s-xl) 0;
}

/* =========================
   4) BUTTONS
   ========================= */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--s-xs);
  padding: var(--s-sm) var(--s-lg);
  border: 1px solid transparent;
  border-radius: var(--r-lg);
  font-size: var(--fs-sm);
  font-weight: 700;
  cursor: pointer;
  transition: transform var(--t-fast), box-shadow var(--t-fast), background var(--t-fast), border-color var(--t-fast);
  white-space: nowrap;
  user-select: none;
}
.btn:hover { transform: translateY(-1px); text-decoration: none; }
.btn:active { transform: translateY(0); }
.btn:disabled { opacity: 0.55; cursor: not-allowed; transform: none; box-shadow: none; }

.btn-primary { background: var(--color-primary); color: #fff; }
.btn-primary:hover { background: var(--color-primary-dark); box-shadow: var(--shadow-md); }

.btn-secondary { background: var(--color-secondary); color: #fff; }
.btn-secondary:hover { filter: brightness(0.92); box-shadow: var(--shadow-md); }

.btn-success { background: var(--color-success); color: #fff; }
.btn-success:hover { filter: brightness(0.92); box-shadow: var(--shadow-md); }

.btn-warning { background: var(--color-warning); color: #fff; }
.btn-warning:hover { filter: brightness(0.92); box-shadow: var(--shadow-md); }

.btn-danger { background: var(--color-danger); color: #fff; }
.btn-danger:hover { filter: brightness(0.92); box-shadow: var(--shadow-md); }

.btn-danger-alt { background: var(--color-danger-alt); color: #fff; }
.btn-danger-alt:hover { filter: brightness(0.92); box-shadow: var(--shadow-md); }

.btn-neutral { background: var(--color-neutral); color: #fff; }
.btn-neutral:hover { filter: brightness(0.92); box-shadow: var(--shadow-md); }

.btn-play {
  background: var(--color-primary);
  color: #fff;
  padding: var(--s-sm) var(--s-xl);
  font-weight: 800;
}
.btn-play:hover { background: var(--color-primary-dark); transform: translateY(-1px) scale(1.03); }

.btn-sm { padding: var(--s-xs) var(--s-md); font-size: var(--fs-xs); border-radius: var(--r-md); }
.btn-lg { padding: var(--s-md) var(--s-xl); font-size: var(--fs-base); }

.btn-block { width: 100%; justify-content: center; }

/* Icon button (used in header/search) */
.icon-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid transparent;
  background: transparent;
  color: inherit;
  padding: 6px 10px;
  border-radius: var(--r-md);
  cursor: pointer;
  transition: background var(--t-fast), border-color var(--t-fast);
}
.icon-btn:hover { background: rgba(255,255,255,0.12); }
[data-theme="dark"] .icon-btn:hover { background: rgba(255,255,255,0.08); }

/* =========================
   5) FORMS
   ========================= */
.form-group { margin-bottom: var(--s-lg); }
.form-label { display: block; margin-bottom: var(--s-xs); font-weight: 700; color: var(--text); }

.form-input,
.form-select,
.form-textarea,
.input {
  width: 100%;
  padding: var(--s-sm) var(--s-md);
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  background: var(--surface);
  color: var(--text);
  transition: border-color var(--t-fast), box-shadow var(--t-fast), background var(--t-fast);
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus,
.input:focus {
  outline: none;
  border-color: var(--color-secondary);
  box-shadow: 0 0 0 3px rgba(59,130,246,0.15);
}

.inline-form {
  display: inline-flex;
  align-items: center;
  gap: var(--s-sm);
  flex-wrap: wrap;
}

.select-sm {
  padding: var(--s-xs) var(--s-sm);
  font-size: var(--fs-sm);
  min-width: 120px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  color: var(--text);
}

/* =========================
   6) CARDS
   ========================= */
.cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: var(--s-xl);
  margin: var(--s-xl) 0;
}

.card,
.filter-card,
.auth-form {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  overflow: hidden;
  box-shadow: var(--shadow-sm);
  transition: transform var(--t-base), box-shadow var(--t-base), border-color var(--t-fast);
}

.card {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.card:hover,
.filter-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-lg);
  border-color: rgba(99,102,241,0.20);
}

.card-row {
  display: flex;
  align-items: flex-start;
  gap: var(--s-lg);
  padding: var(--s-lg);
}

.card-media {
  position: relative;
  width: 100%;
  overflow: hidden;
  aspect-ratio: 16/9;
  background: var(--surface-2);
}
.card-media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--t-base);
}
.card:hover .card-media img { transform: scale(1.05); }

.play-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--t-base);
}
.card-media:hover .play-overlay { opacity: 1; }

.card-avatar {
  width: 60px;
  height: 60px;
  flex-shrink: 0;
  border-radius: var(--r-pill);
  overflow: hidden;
  background: var(--surface-2);
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid var(--border);
}
.card-avatar img { width: 100%; height: 100%; object-fit: cover; }
.avatar-text { font-weight: 900; font-size: var(--fs-lg); color: var(--text-muted); text-transform: uppercase; }

.card-body { flex: 1; display: flex; flex-direction: column; }

.card-title {
  font-weight: 900;
  font-size: var(--fs-base);
  margin: var(--s-md) var(--s-lg) var(--s-xs);
  color: var(--text);
  line-height: 1.3;
}

.card-sub,
.card-subtitle {
  font-size: var(--fs-sm);
  color: var(--text-muted);
  margin: 0 var(--s-lg) var(--s-md);
  line-height: 1.4;
}

.card-meta {
  display: flex;
  gap: var(--s-xs);
  flex-wrap: wrap;
  margin: var(--s-xs) var(--s-lg) var(--s-md);
}

.card-actions {
  margin-top: auto;
  padding: 0 var(--s-lg) var(--s-lg);
  display: flex;
  flex-wrap: wrap;
  gap: var(--s-sm);
  align-items: center;
}
.card-actions form { display: inline-flex; align-items: center; gap: var(--s-sm); }

/* Card types */
.recitation-card,
.surah-card,
.juz-card,
.playlist-card { padding: var(--s-lg); }

/* =========================
   7) PAGE HEADERS (Reciter/Surah)
   ========================= */
.reciter-header,
.surah-header {
  display: flex;
  align-items: flex-start;
  gap: var(--s-2xl);
  margin-bottom: var(--s-3xl);
  padding: var(--s-xl);
  background: var(--header-grad);
  border-radius: var(--r-lg);
  color: #fff;
}
[data-theme="dark"] .reciter-header,
[data-theme="dark"] .surah-header {
  color: #fff;
}
.reciter-image img,
.surah-image img {
  width: 200px;
  height: 200px;
  object-fit: cover;
  border-radius: var(--r-lg);
  border: 4px solid rgba(255,255,255,0.85);
}
[data-theme="dark"] .reciter-image img,
[data-theme="dark"] .surah-image img { border-color: rgba(255,255,255,0.25); }

.reciter-info,
.surah-info { flex: 1; }
.reciter-info h2,
.surah-info h2 { color: #fff; margin-bottom: var(--s-md); }
.reciter-info p,
.surah-info p { margin-bottom: var(--s-md); opacity: 0.95; }

.play-all-container { margin-top: var(--s-lg); }

/* =========================
   8) MINI PLAYER (FIXED)
   ========================= */

/* If you still use hidden attribute sometimes */
.mini-player[hidden] { display: none !important; }

.mini-player{
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;

  background: var(--surface);
  border-top: 1px solid var(--border);

  padding: var(--s-md) var(--s-lg);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--s-lg);

  /* IMPORTANT: keep above everything */
  z-index: 9999;

  box-shadow: var(--shadow-lg);
  transition: all var(--t-base);

  /* IMPORTANT: prevent buttons from being unclickable due to overlays */
  pointer-events: auto;
}

.mini-player * { pointer-events: auto; }

/* minimized */
.mini-player.minimized{
  width: 320px;
  left: auto;
  right: var(--s-lg);
  bottom: var(--s-lg);

  border-radius: var(--r-lg);
  border: 1px solid var(--border);

  /* IMPORTANT: allows maximize button to stay clickable even if near edges */
  overflow: visible;

  /* gives a more compact look */
  padding: var(--s-sm) var(--s-md);
}

/* Title */
.mini-left{ flex: 1; min-width: 0; }
.mini-title{
  font-weight: 800;
  font-size: var(--fs-sm);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text);
}

/* Controls */
.mini-controls{
  display: flex;
  align-items: center;
  gap: var(--s-sm);
  flex-wrap: nowrap;
}

/* In minimized mode controls can wrap if needed */
.mini-player.minimized .mini-controls{
  flex-wrap: wrap;
  gap: 6px;
  justify-content: flex-end;
}

.mini-controls .btn{
  padding: var(--s-xs) var(--s-md);
  font-size: var(--fs-sm);
}

/* Make sure the 3 right buttons are always clickable and not hidden behind anything */
.mini-minimize,
.mini-maximize,
.mini-close{
  position: relative;
  z-index: 5;
}

/* Optional: make the right-side buttons tighter in minimized mode */
.mini-player.minimized .mini-minimize,
.mini-player.minimized .mini-maximize,
.mini-player.minimized .mini-close{
  margin-left: 4px;
}

/* Tooltip for mini controls */
.mini-controls [data-tip]{ position: relative; }

.mini-controls [data-tip]::after{
  content: attr(data-tip);
  position: absolute;
  bottom: calc(100% + 10px);
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.85);
  color: #fff;
  padding: 6px 8px;
  border-radius: var(--r-md);
  font-size: var(--fs-xs);
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--t-fast);
  z-index: 99999; /* tooltip above all */
}

.mini-controls [data-tip]::before{
  content: "";
  position: absolute;
  bottom: calc(100% + 4px);
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-top-color: rgba(0,0,0,0.85);
  opacity: 0;
  transition: opacity var(--t-fast);
  z-index: 99999;
}

.mini-controls [data-tip]:hover::after,
.mini-controls [data-tip]:hover::before{
  opacity: 1;
}
.mini-player.minimized { overflow: visible; }


/* IMPORTANT: keep mobile menu under mini player */
.mobile-menu{ z-index: 1001; }


/* =========================
   9) HEADER / NAVIGATION
   ========================= */
header {
  background: var(--header-grad);
  color: #fff;
  padding: var(--s-sm) var(--s-xl);
  box-shadow: var(--shadow-md);
  position: sticky;
  top: 0;
  z-index: 100;
}

.header-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--s-lg);
  width: 100%;
}

/* Brand */
.site-title {
  display: flex;
  align-items: center;
  gap: var(--s-sm);
  flex-shrink: 0;
}
.site-title h1 {
  margin: 0;
  font-size: var(--fs-lg);
  font-weight: 900;
  letter-spacing: -0.4px;
  white-space: nowrap;
  color: #fff;
}
.site-logo {
  width: 32px;
  height: 32px;
  border-radius: var(--r-sm);
  background: rgba(255,255,255,0.20);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  font-size: 18px;
}

/* Navbar row */
.navbar {
  display: flex;
  align-items: center;
  gap: var(--s-md);
  flex: 1;
  justify-content: space-between;
}
.nav-left, .nav-right { display: flex; align-items: center; gap: var(--s-sm); }

.nav-link {
  color: #fff;
  padding: var(--s-xs) var(--s-md);
  border-radius: var(--r-md);
  font-weight: 800;
  font-size: var(--fs-sm);
  transition: background var(--t-fast);
  white-space: nowrap;
}
.nav-link:hover { background: rgba(255,255,255,0.15); text-decoration: none; }

/* Toggle pills */
.nav-pill {
  color: #fff;
  padding: 6px 12px;
  border-radius: var(--r-pill);
  border: 1px solid rgba(255,255,255,0.25);
  font-size: var(--fs-xs);
  font-weight: 900;
  transition: background var(--t-fast), border-color var(--t-fast);
  min-width: 50px;
  text-align: center;
  white-space: nowrap;
}
.nav-pill:hover {
  background: rgba(255,255,255,0.15);
  border-color: rgba(255,255,255,0.50);
  text-decoration: none;
}

/* Search */
.nav-search {
  display: flex;
  flex: 1;
  max-width: 400px;
  min-width: 150px;
  position: relative;
  margin: 0 var(--s-md);
}
.nav-search input[type="text"] {
  flex: 1;
  padding: 8px 40px 8px 12px;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: var(--r-pill);
  font-size: 13px;
  background: rgba(255,255,255,0.92);
  color: var(--color-primary);
  transition: background var(--t-fast), box-shadow var(--t-fast), border-color var(--t-fast);
}
[data-theme="dark"] .nav-search input[type="text"] {
  background: rgba(255,255,255,0.10);
  color: #fff;
  border-color: rgba(255,255,255,0.14);
}
.nav-search input[type="text"]:focus {
  outline: none;
  background: #fff;
  border-color: rgba(255,255,255,0.35);
  box-shadow: 0 0 0 2px rgba(255,255,255,0.25);
}
[data-theme="dark"] .nav-search input[type="text"]:focus {
  background: rgba(255,255,255,0.14);
}
.nav-search button {
  position: absolute;
  right: 4px;
  top: 50%;
  transform: translateY(-50%);
  padding: 4px 10px;
  border: none;
  border-radius: var(--r-pill);
  background: var(--color-secondary);
  color: #fff;
  font-size: 12px;
  font-weight: 900;
  cursor: pointer;
  transition: filter var(--t-fast);
}
.nav-search button:hover { filter: brightness(0.92); }

/* Account dropdown */
.nav-account { position: relative; flex-shrink: 0; }
.nav-account-btn {
  background: rgba(255,255,255,0.10);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.20);
  padding: 6px 12px;
  border-radius: var(--r-pill);
  font-size: 13px;
  font-weight: 900;
  cursor: pointer;
  transition: background var(--t-fast);
  display: flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;
}
.nav-account-btn:hover { background: rgba(255,255,255,0.15); }
.caret { font-size: 10px; transition: transform var(--t-fast); }

.nav-dropdown {
  display: none;
  position: absolute;
  right: 0;
  top: calc(100% + 6px);
  min-width: 190px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  overflow: hidden;
  box-shadow: var(--shadow-lg);
  z-index: 1000;
  animation: dropdownFade 0.2s ease;
}
.nav-account.open .nav-dropdown { display: block; }
.nav-account.open .caret { transform: rotate(180deg); }

@keyframes dropdownFade {
  from { opacity: 0; transform: translateY(-6px); }
  to   { opacity: 1; transform: translateY(0); }
}

.nav-dd-link {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  color: var(--text);
  font-size: 13px;
  font-weight: 700;
  transition: background var(--t-fast);
}
.nav-dd-link:hover { background: var(--surface-2); text-decoration: none; }

.nav-dd-sep { height: 1px; background: var(--border); margin: 4px 0; }

.nav-dd-form { margin: 0; width: 100%; }
.nav-dd-btn {
  width: 100%;
  text-align: left;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--text);
  padding: 10px 12px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 800;
}
.nav-dd-btn:hover { background: var(--surface-2); }

/* =========================
   10) MOBILE MENU
   ========================= */
.mobile-menu-toggle {
  display: none;
  background: none;
  border: none;
  color: #fff;
  font-size: 20px;
  cursor: pointer;
  padding: 8px;
  border-radius: var(--r-sm);
}
.mobile-menu-toggle:hover { background: rgba(255,255,255,0.10); }

.mobile-menu {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  z-index: 1001;
  padding: var(--s-xl);
  overflow-y: auto;
}
.mobile-menu.active { display: block; }

.mobile-menu-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--s-xl);
  padding-bottom: var(--s-md);
  border-bottom: 1px solid rgba(255,255,255,0.10);
}
.mobile-menu-title {
  color: #fff;
  font-size: var(--fs-lg);
  font-weight: 900;
  margin: 0;
}
.mobile-menu-close {
  background: none;
  border: none;
  color: #fff;
  font-size: 24px;
  cursor: pointer;
  padding: 4px;
}

.mobile-menu-content {
  background: var(--header-grad);
  border-radius: var(--r-lg);
  padding: var(--s-lg);
  display: flex;
  flex-direction: column;
  gap: var(--s-md);
  box-shadow: var(--shadow-xl);
}

.mobile-nav-link {
  color: #fff;
  padding: var(--s-md);
  border-radius: var(--r-md);
  font-size: var(--fs-base);
  font-weight: 900;
  transition: background var(--t-fast);
  display: flex;
  align-items: center;
  gap: var(--s-md);
}
.mobile-nav-link:hover { background: rgba(255,255,255,0.10); text-decoration: none; }

.mobile-nav-actions {
  display: flex;
  gap: var(--s-sm);
  margin-top: var(--s-lg);
  padding-top: var(--s-lg);
  border-top: 1px solid rgba(255,255,255,0.10);
}

/* =========================
   11) AUTH FORMS
   ========================= */
.auth-form {
  max-width: 420px;
  margin: var(--s-2xl) auto;
  padding: var(--s-2xl);
  box-shadow: var(--shadow-md);
}
.auth-form p { margin-bottom: var(--s-lg); }
.auth-form label { display: block; margin-bottom: var(--s-xs); font-weight: 900; color: var(--text); }

.auth-form input[type="text"],
.auth-form input[type="email"],
.auth-form input[type="password"] {
  width: 100%;
  padding: var(--s-sm) var(--s-md);
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  background: var(--surface);
  color: var(--text);
  font-size: var(--fs-base);
  transition: border-color var(--t-fast), box-shadow var(--t-fast), background var(--t-fast);
}
.auth-form input:focus {
  outline: none;
  border-color: var(--color-secondary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

/* Email icon */
.auth-form input[type="email"] {
  padding-left: 40px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' fill='%236b7280' viewBox='0 0 24 24'%3E%3Cpath d='M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5L4 8V6l8 5 8-5v2Z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: 12px center;
  background-size: 18px;
}
[data-theme="dark"] .auth-form input[type="email"] {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' fill='%239ca3af' viewBox='0 0 24 24'%3E%3Cpath d='M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5L4 8V6l8 5 8-5v2Z'/%3E%3C/svg%3E");
}

.auth-form .errorlist {
  list-style: none;
  padding: 0;
  margin-top: var(--s-xs);
  color: var(--color-danger);
  font-size: var(--fs-sm);
}
.auth-form button[type="submit"] {
  width: 100%;
  padding: var(--s-sm) var(--s-lg);
  border: none;
  border-radius: var(--r-lg);
  background: var(--color-primary);
  color: #fff;
  font-weight: 900;
  cursor: pointer;
  transition: transform var(--t-fast), box-shadow var(--t-fast), background var(--t-fast);
}
.auth-form button[type="submit"]:hover {
  background: var(--color-primary-dark);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

/* =========================
   12) FILTER SYSTEM
   ========================= */
.filter-card {
  padding: var(--s-xl);
  margin-bottom: var(--s-2xl);
}
.filter-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--s-lg);
  gap: var(--s-md);
  flex-wrap: wrap;
}
.filter-card-title {
  font-size: var(--fs-lg);
  font-weight: 900;
  color: var(--text);
  margin: 0;
}
.filter-reset {
  font-size: var(--fs-sm);
  font-weight: 900;
  color: var(--color-secondary);
  padding: var(--s-xs) var(--s-md);
  border-radius: var(--r-md);
  transition: background var(--t-fast), color var(--t-fast);
}
.filter-reset:hover { color: var(--color-primary); background: var(--surface-2); text-decoration: none; }

.filter-form { width: 100%; }
.filter-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--s-lg);
  margin-bottom: var(--s-lg);
}
.filter-group { display: flex; flex-direction: column; gap: var(--s-xs); }
.filter-label {
  font-size: var(--fs-sm);
  font-weight: 900;
  color: var(--text);
  display: flex;
  align-items: center;
  gap: var(--s-xs);
}

.filter-select {
  width: 100%;
  padding: var(--s-sm) var(--s-md);
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  background: var(--surface);
  color: var(--text);
  cursor: pointer;
  transition: border-color var(--t-fast), box-shadow var(--t-fast);
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%236b7280' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right var(--s-md) center;
  background-size: 16px;
}
.filter-select:focus {
  outline: none;
  border-color: var(--color-secondary);
  box-shadow: 0 0 0 3px rgba(59,130,246,0.15);
}

.filter-actions {
  display: flex;
  gap: var(--s-sm);
  justify-content: flex-end;
  padding-top: var(--s-md);
  border-top: 1px solid var(--border);
}
.filter-button {
  padding: var(--s-sm) var(--s-lg);
  border-radius: var(--r-md);
  font-size: var(--fs-sm);
  font-weight: 900;
  border: none;
  cursor: pointer;
  transition: filter var(--t-fast), transform var(--t-fast);
}
.filter-button:hover { transform: translateY(-1px); }
.filter-clear { background: var(--surface-2); color: var(--text); border: 1px solid var(--border); }
.filter-clear:hover { filter: brightness(0.96); }
.filter-apply { background: var(--color-primary); color: #fff; }
.filter-apply:hover { background: var(--color-primary-dark); }

.results-section { margin-top: var(--s-2xl); }
.results-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--s-lg);
  gap: var(--s-md);
  flex-wrap: wrap;
}
.results-count {
  font-size: var(--fs-sm);
  color: var(--text-muted);
  font-weight: 800;
  display: flex;
  align-items: center;
  gap: var(--s-xs);
}
.results-count::before { content: "ðŸ“Š"; font-size: var(--fs-sm); }

.no-results {
  text-align: center;
  padding: var(--s-3xl) var(--s-xl);
  background: var(--surface-2);
  border-radius: var(--r-lg);
  border: 1px solid var(--border);
  margin: var(--s-2xl) 0;
}
.no-results-icon { font-size: 3rem; color: var(--g-400); margin-bottom: var(--s-lg); }
.no-results h3 { color: var(--text); margin-bottom: var(--s-sm); }
.no-results p { color: var(--text-muted); margin-bottom: var(--s-lg); }

.badge {
  display: inline-flex;
  align-items: center;
  padding: var(--s-xs) var(--s-sm);
  border-radius: var(--r-pill);
  font-size: var(--fs-xs);
  font-weight: 900;
  line-height: 1;
  white-space: nowrap;
}
.badge-type { background: rgba(59,130,246,0.12); color: var(--color-secondary); }
.badge-juz { background: rgba(16,185,129,0.12); color: var(--color-success); }
.badge-murattal { background: rgba(139,92,246,0.12); color: #8b5cf6; }
.badge-mujawwad { background: rgba(245,158,11,0.12); color: var(--color-warning); }

.status-indicator {
  display: inline-flex;
  align-items: center;
  gap: var(--s-xs);
  font-size: var(--fs-xs);
  padding: 2px 8px;
  border-radius: var(--r-pill);
  font-weight: 800;
}
.status-active { background: rgba(16,185,129,0.12); color: var(--color-success); }
.status-inactive { background: rgba(239,68,68,0.12); color: var(--color-danger); }

/* Filter tags */
.filter-tags { display: flex; flex-wrap: wrap; gap: var(--s-xs); margin-top: var(--s-sm); }
.filter-tag {
  display: inline-flex;
  align-items: center;
  gap: var(--s-xs);
  padding: 4px 8px;
  background: var(--surface-2);
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  font-size: var(--fs-xs);
  color: var(--text-muted);
}
.filter-tag-remove {
  background: none;
  border: none;
  color: var(--g-400);
  cursor: pointer;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  font-size: 10px;
}
.filter-tag-remove:hover { color: var(--color-danger); }

/* Loading spinner */
.filter-loading { position: relative; pointer-events: none; opacity: 0.75; }
.filter-loading::after {
  content: "";
  position: absolute;
  top: 50%;
  right: var(--s-md);
  transform: translateY(-50%);
  width: 16px;
  height: 16px;
  border: 2px solid rgba(255,255,255,0.0);
  border-color: var(--border);
  border-top-color: var(--color-secondary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: translateY(-50%) rotate(360deg); } }

/* =========================
   13) PAGINATION + PAGE HEADER
   ========================= */
.pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--s-sm);
  margin-top: var(--s-2xl);
  padding-top: var(--s-lg);
  border-top: 1px solid var(--border);
}
.page-info {
  font-size: var(--fs-sm);
  color: var(--text-muted);
  padding: var(--s-xs) var(--s-md);
  background: var(--surface-2);
  border-radius: var(--r-md);
  border: 1px solid var(--border);
}

.page-header { margin-bottom: var(--s-2xl); }
.page-title { margin-bottom: var(--s-xs); }
.page-subtitle { color: var(--text-muted); font-size: var(--fs-lg); margin-bottom: 0; }

/* Favorites */
.favorite-form { display: inline-flex; align-items: center; }
.btn-favorite {
  width: 36px;
  height: 36px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--r-pill);
}

/* =========================
   14) UTILITIES
   ========================= */
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }
.text-bold { font-weight: 900; }
.text-muted { color: var(--text-muted); opacity: 0.9; }

.d-flex { display: flex; }
.d-inline-flex { display: inline-flex; }
.d-block { display: block; }
.d-inline-block { display: inline-block; }
.d-none { display: none; }

.flex-wrap { flex-wrap: wrap; }
.flex-nowrap { flex-wrap: nowrap; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }
.gap-1 { gap: var(--s-xs); }
.gap-2 { gap: var(--s-sm); }
.gap-3 { gap: var(--s-md); }
.gap-4 { gap: var(--s-lg); }

.mt-0 { margin-top: 0; } .mt-1 { margin-top: var(--s-xs); } .mt-2 { margin-top: var(--s-sm); }
.mt-3 { margin-top: var(--s-md); } .mt-4 { margin-top: var(--s-lg); } .mt-5 { margin-top: var(--s-xl); }

.mb-0 { margin-bottom: 0; } .mb-1 { margin-bottom: var(--s-xs); } .mb-2 { margin-bottom: var(--s-sm); }
.mb-3 { margin-bottom: var(--s-md); } .mb-4 { margin-bottom: var(--s-lg); } .mb-5 { margin-bottom: var(--s-xl); }

.p-0 { padding: 0; } .p-1 { padding: var(--s-xs); } .p-2 { padding: var(--s-sm); }
.p-3 { padding: var(--s-md); } .p-4 { padding: var(--s-lg); } .p-5 { padding: var(--s-xl); }

.empty-state {
  text-align: center;
  padding: var(--s-3xl) var(--s-xl);
  color: var(--text-muted);
  font-style: italic;
}
.empty-state p { margin-bottom: 0; }

.back-link {
  display: inline-flex;
  align-items: center;
  gap: var(--s-xs);
  color: var(--color-secondary);
  font-weight: 900;
  margin-top: var(--s-xl);
}
.back-link:hover { text-decoration: underline; color: var(--color-primary); }

/* =========================
   15) RTL SUPPORT (Plain CSS)
   ========================= */
[dir="rtl"] { text-align: right; }

[dir="rtl"] .navbar,
[dir="rtl"] .nav-left,
[dir="rtl"] .nav-right,
[dir="rtl"] .section-head,
[dir="rtl"] .card-actions,
[dir="rtl"] .inline-form,
[dir="rtl"] .mini-controls,
[dir="rtl"] .card-row,
[dir="rtl"] .reciter-header,
[dir="rtl"] .surah-header {
  flex-direction: row-reverse;
}

[dir="rtl"] .cards { direction: rtl; }

[dir="rtl"] .card-avatar { margin-right: var(--s-md); margin-left: 0; }
[dir="rtl"] .btn { flex-direction: row-reverse; }
[dir="rtl"] .form-label { text-align: right; }
[dir="rtl"] .form-input,
[dir="rtl"] .form-select,
[dir="rtl"] .form-textarea,
[dir="rtl"] .input { text-align: right; }

[dir="rtl"] .nav-search input[type="text"] { padding: 8px 12px 8px 40px; }
[dir="rtl"] .nav-search button { right: auto; left: 4px; }

[dir="rtl"] .nav-dropdown { right: auto; left: 0; }
[dir="rtl"] .caret { margin-left: 0; margin-right: 6px; transform: rotate(180deg); }

[dir="rtl"] .mini-player { flex-direction: row-reverse; }
[dir="rtl"] .mini-player.minimized { right: auto; left: var(--s-lg); }

[dir="rtl"] ul,
[dir="rtl"] ol { padding-right: var(--s-xl); padding-left: 0; }

[dir="rtl"] table { direction: rtl; }
[dir="rtl"] th,
[dir="rtl"] td { text-align: right; }

[dir="rtl"] .detail-label { margin-right: 0; margin-left: var(--s-xs); }

/* RTL: email icon padding */
[dir="rtl"] .auth-form input[type="email"] {
  padding-left: var(--s-md);
  padding-right: 40px;
  background-position: calc(100% - 12px) center;
}

/* RTL: filter select arrow */
[dir="rtl"] .filter-select {
  background-position: left var(--s-md) center;
  padding-right: var(--s-md);
  padding-left: calc(var(--s-md) * 2.5);
}
[dir="rtl"] .filter-actions,
[dir="rtl"] .results-header { flex-direction: row-reverse; }

/* RTL: tooltip alignment */
[dir="rtl"] .mini-controls [data-tip]::after { left: auto; right: 50%; transform: translateX(50%); }
[dir="rtl"] .mini-controls [data-tip]::before { left: auto; right: 50%; transform: translateX(50%); }

/* =========================
   16) RESPONSIVE
   ========================= */
@media (max-width: 1024px) {
  .nav-search { max-width: 300px; }
}

@media (max-width: 768px) {
  header { padding: var(--s-xs) var(--s-md); }

  .nav-left,
  .nav-right .nav-link:not(.nav-account-btn),
  .nav-search,
  .nav-pill { display: none; }

  .mobile-menu-toggle { display: block; }

  .cards { grid-template-columns: 1fr; gap: var(--s-lg); }

  .reciter-header,
  .surah-header {
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--s-lg);
  }

  .reciter-image img,
  .surah-image img { width: 150px; height: 150px; }

  .card-row { flex-direction: column; text-align: center; }
  .card-avatar { align-self: center; }

  .card-actions { justify-content: center; }
  .card-actions form { width: 100%; justify-content: center; }

  .mini-player {
    flex-direction: column;
    gap: var(--s-md);
    padding: var(--s-md);
  }
  .mini-player.minimized { width: 260px; }

  .btn { width: 100%; justify-content: center; }
  .inline-form { flex-direction: column; width: 100%; }
  .inline-form .select-sm { width: 100%; }

  .filter-card { padding: var(--s-lg); }
  .filter-grid { grid-template-columns: 1fr; gap: var(--s-md); }
  .filter-card-header { flex-direction: column; align-items: stretch; gap: var(--s-sm); }
  .filter-card-title { text-align: center; }
  .filter-reset { align-self: center; }
  .filter-actions { flex-direction: column; }
  .filter-button { width: 100%; }
  .results-header { flex-direction: column; align-items: stretch; text-align: center; }
  .results-count { justify-content: center; }
}

@media (max-width: 480px) {
  main { padding: var(--s-md); }
  .site-title h1 { font-size: var(--fs-sm); }
  .nav-account-btn { padding: 4px 8px; font-size: 12px; }
  .mobile-menu { padding: var(--s-lg); }
  .card-actions { flex-direction: column; align-items: stretch; }
  .card-actions .btn { width: 100%; }
}

/* =========================
   17) PRINT
   ========================= */
@media print {
  .mini-player,
  .play-all-container,
  .card-actions,
  form { display: none !important; }

  .card { break-inside: avoid; border: 1px solid #ccc; box-shadow: none; }
}

/* =========================
   FIX ACCOUNT DROPDOWN
   (matches your current HTML)
   ========================= */

/* make sure dropdown positions correctly */
.nav-account {
  position: relative;
}

/* style button (optional, but keeps consistent) */
.account-btn {
  background: rgba(255, 255, 255, 0.10);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, 0.20);
  padding: 6px 12px;
  border-radius: var(--r-pill);
  font-size: 13px;
  font-weight: 900;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;
  transition: background var(--t-fast);
}
.account-btn:hover {
  background: rgba(255, 255, 255, 0.15);
}

/* dropdown menu (hidden by default) */
.dropdown {
  display: none;
  position: absolute;
  right: 0;
  top: calc(100% + 8px);
  min-width: 200px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  z-index: 2000;
}

/* show when JS adds .open */
.nav-account.open .dropdown {
  display: block;
}

/* caret rotate when open */
.nav-account.open .caret {
  transform: rotate(180deg);
}
.caret {
  font-size: 10px;
  transition: transform var(--t-fast);
}

/* dropdown links */
.dd-link {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  color: var(--text);
  font-size: 13px;
  font-weight: 800;
  background: transparent;
  border: 0;
  width: 100%;
  text-decoration: none;
  cursor: pointer;
}
.dd-link:hover {
  background: var(--surface-2);
  text-decoration: none;
}

/* separator */
.dd-sep {
  height: 1px;
  background: var(--border);
  margin: 4px 0;
}

/* form reset inside dropdown */
.dd-form {
  margin: 0;
}

/* RTL dropdown side */
[dir="rtl"] .dropdown {
  right: auto;
  left: 0;
}
